/*
 * Copyright (c) 2018-2019, NVIDIA CORPORATION.  All rights reserved.
 *
 * This program is free software; you can redistribute it and/or modify
 * it under the terms of the GNU General Public License as published by
 * the Free Software Foundation; either version 2 of the License, or
 * (at your option) any later version.
 *
 * This program is distributed in the hope that it will be useful, but WITHOUT
 * ANY WARRANTY; without even the implied warranty of MERCHANTABILITY or
 * FITNESS FOR A PARTICULAR PURPOSE.  See the GNU General Public License for
 * more details.
 *
 * You should have received a copy of the GNU General Public License
 * along with this program.  If not, see <http://www.gnu.org/licenses/>.
 */
#include "tegra234-camera-ar0234.dtsi"


// #define CAM0_RST_L TEGRA234_MAIN_GPIO(H, 3)
// #define CAM0_PWDN TEGRA234_MAIN_GPIO(H, 6)
// #define CAM1_RST_L TEGRA234_MAIN_GPIO(T, 6)
// #define CAM1_PWDN TEGRA234_MAIN_GPIO(T, 5)
// #define PWR_EN TEGRA234_MAIN_GPIO(M, 5)

#define GYRO1_IRQ_GPIO TEGRA234_AON_GPIO(AA, 3)
#define ACCE1_IRQ_GPIO TEGRA234_AON_GPIO(AA, 1)

#define CAM_I2C_MUX TEGRA234_MAIN_GPIO(H, 6)  // cam0_mclk occupied

#define	CAM_PWDN TEGRA234_MAIN_GPIO(P, 0)

/* camera control gpio definitions */

/ {
	cam_i2cmux {
		status = "okay";
		compatible = "i2c-mux-gpio";
		#address-cells = <1>;
		#size-cells = <0>;
		i2c-parent = <&cam_i2c>;
		mux-gpios = <&tegra_main_gpio CAM_I2C_MUX GPIO_ACTIVE_HIGH>;
		i2c@0 {
			reg = <0>;
			#address-cells = <1>;
			#size-cells = <0>;
			status = "okay";

			max96712_a@62 {
					compatible = "nvidia,max96712";
					reg = <0x62>;
					channel = "a";
					pwdn-gpios = <&tegra_main_gpio CAM_PWDN GPIO_ACTIVE_HIGH>;
			};

			bmi088_a@69 {
				compatible = "bmi,bmi088";
				reg = <0x69>; // <-- Must be gyroscope I2C address
				accel_i2c_addr = <0x19>; // Must be specified
				accel_irq_gpio = <&tegra_aon_gpio ACCE1_IRQ_GPIO GPIO_ACTIVE_HIGH>;
				gyro_irq_gpio = <&tegra_aon_gpio GYRO1_IRQ_GPIO GPIO_ACTIVE_HIGH>;
				accel_matrix = [01 00 00 00 01 00 00 00 01];
				gyro_matrix = [01 00 00 00 01 00 00 00 01];
			};

			ar0234_a@18 {
				def-addr = <0x18>;
				/* Define any required hw resources needed by driver */
				/* ie. clocks, io pins, power sources */
				clocks = <&bpmp_clks TEGRA234_CLK_EXTPERIPH1>,
						<&bpmp_clks TEGRA234_CLK_EXTPERIPH1>;
				clock-names = "extperiph1", "pllp_grtba";
				mclk = "extperiph1";
				channel = "a";
				has-eeprom;
				status = "okay";
			};
			ar0234_b@10 {
				def-addr = <0x10>;
				/* Define any required hw resources needed by driver */
				/* ie. clocks, io pins, power sources */
				clocks = <&bpmp_clks TEGRA234_CLK_EXTPERIPH1>,
								<&bpmp_clks TEGRA234_CLK_EXTPERIPH1>;
				clock-names = "extperiph1", "pllp_grtba";
				mclk = "extperiph1";
				channel = "n";
				has-eeprom;
				status = "okay";
			};
		};
		// i2c@1 {
		// 	reg = <1>;
		// 	#address-cells = <1>;
		// 	#size-cells = <0>;
		// 	status = "okay";

		// 	max96712_a@62 {
		// 		compatible = "nvidia,max96712";
		// 		reg = <0x62>;
		// 		channel = "b";
		// 	};

		// 	bmi088_a@69 {
		// 		compatible = "bmi,bmi088";
		// 		reg = <0x69>; // <-- Must be gyroscope I2C address
		// 		accel_i2c_addr = <0x19>; // Must be specified
		// 		accel_irq_gpio = <&tegra_aon_gpio ACCE1_IRQ_GPIO GPIO_ACTIVE_HIGH>;
		// 		gyro_irq_gpio = <&tegra_aon_gpio GYRO1_IRQ_GPIO GPIO_ACTIVE_HIGH>;
		// 		accel_matrix = [01 00 00 00 01 00 00 00 01];
		// 		gyro_matrix = [01 00 00 00 01 00 00 00 01];
		// 	};

		// 	ar0234_c@18 {
		// 		def-addr = <0x18>;
		// 		/* Define any required hw resources needed by driver */
		// 		/* ie. clocks, io pins, power sources */
		// 		clocks = <&bpmp_clks TEGRA234_CLK_EXTPERIPH1>,
		// 				<&bpmp_clks TEGRA234_CLK_EXTPERIPH1>;
		// 		clock-names = "extperiph1", "pllp_grtba";
		// 		mclk = "extperiph1";
		// 		channel = "b";
		// 		has-eeprom;
		// 		status = "okay";
		// 	};
		// 	ar0234_d@10 {
		// 		def-addr = <0x10>;
		// 		/* Define any required hw resources needed by driver */
		// 		/* ie. clocks, io pins, power sources */
		// 		clocks = <&bpmp_clks TEGRA234_CLK_EXTPERIPH1>,
		// 						<&bpmp_clks TEGRA234_CLK_EXTPERIPH1>;
		// 		clock-names = "extperiph1", "pllp_grtba";
		// 		mclk = "extperiph1";
		// 		channel = "n";
		// 		has-eeprom;
		// 		status = "okay";
		// 	};
		// };
	};
};
